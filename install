#!/bin/sh

set -e

DOTBOT_DIR=".dotbot"

DOTBOT_BIN="bin/dotbot"
BASEDIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

cd "${BASEDIR}"

git submodule update --init --recursive

MODULES_CONFIG=(
    'x/x.conf.yaml'
    'sxhkd/sxhkd.conf.yaml'
    'script/script.conf.yaml'
    'themes/themes.conf.yaml'
    'gtk3/gtk3.conf.yaml'
)

for config_path in "${MODULES_CONFIG[@]}"; do
    "${BASEDIR}/${DOTBOT_DIR}/${DOTBOT_BIN}" -d "${BASEDIR}" -c "$config_path" "${@}"
done

